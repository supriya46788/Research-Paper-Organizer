<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Viewer & Annotator | Research Paper Organizer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="css/pdf-viewer.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="shortcut icon" href="./favicon/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/nano.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr"></script>
    <link rel="icon" href="./favicon/favicon-48x48.png" type="image/png" />

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="48x48"
      href="./favicon/favicon-48x48.png"
    />
    <link rel="manifest" href="./favicon/site.webmanifest" />
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <nav class="navbar">
            <a href="index.html" class="nav-item">
                Home
            </a>

            <div class="navbar-right-links">
                <a href="about.html" class="nav-item">About us</a>
                <a href="blog.html" class="nav-item">Blogs</a>
                <a href="Faq.html" class="nav-item">FAQ</a>
                <a href="contact.html" class="nav-item">Contact Us</a>
                <a href="tools.html" class="nav-item">Tools</a>
                <button class="dark-toggle nav-item" id="darkModeToggle" title="Toggle Dark Mode" onclick="toggleDarkMode()">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </nav>

        <!-- PDF Viewer Header -->
        <div class="pdf-header">
            <div class="pdf-controls">
                <div class="file-controls">
                    <label for="pdf-upload" class="upload-btn">
                        <i class="fas fa-upload"></i>
                        Upload PDF
                    </label>
                    <input type="file" id="pdf-upload" accept=".pdf" style="display: none;">
                    
                    <button id="save-annotations" class="control-btn">
                        <i class="fas fa-save"></i>
                        Save Notes
                    </button>

                    <!-- 👇 New Import Notes Button Added Here -->
                    <button id="import-annotations" class="control-btn">
                        <i class="fas fa-file-import"></i>
                        Import Notes
                    </button>
                    <input type="file" id="import-annotations-file" accept=".json" style="display:none;">
                    <!-- ☝️ End New Code -->

                    <button id="export-annotations" class="control-btn">
                        <i class="fas fa-file-pdf"></i>
                        Export PDF
                    </button>
                </div>

                <div class="annotation-toolbar">
                    <button id="highlight-tool" class="tool-btn active" data-tool="highlight">
                        <i class="fas fa-highlighter"></i>
                        Highlight
                    </button>
                    <button id="underline-tool" class="tool-btn" data-tool="underline">
                        <i class="fas fa-underline"></i>
                        Underline
                    </button>
                    <button id="strikethrough-tool" class="tool-btn" data-tool="strikethrough">
                        <i class="fas fa-strikethrough"></i>
                        Strike
                    </button>
                    <button id="pen-tool" class="tool-btn" data-tool="pen">
                        <i class="fas fa-pen"></i>
                        Pen
                    </button>
                    <button id="note-tool" class="tool-btn" data-tool="note">
                        <i class="fas fa-sticky-note"></i>
                        Note
                    </button>
                    <!-- Color Picker (Color Wheel) -->
                    <div class="color-picker" id="color-picker"></div>
                    <input type="color" id="color-wheel" title="Choose color" style="width: 32px; height: 32px; border: none; background: none; cursor: pointer; vertical-align: middle; margin-left: 8px;" />
                    <div class="tool-setting" style="display: flex; align-items: center; margin-left: 10px;">
                        <label for="line-width" style="margin-right: 5px; font-size: 14px;">Width:</label>
                        <input type="range" id="line-width" min="1" max="20" value="2" style="width: 80px;">
                        <span id="line-width-value" style="margin-left: 5px; min-width: 20px; text-align: center;">2</span>
                    </div>
                    <div style="display:flex; flex-direction:column; align-items:center; margin: 0 6px;">
                        <button id="undo-btn" class="action-btn" title="Undo">
                            <i class="fas fa-undo"></i>
                        </button>
                        <span style="font-size:11px; color:#555; margin-top:4px;">Undo</span>
                    </div>
                    <div style="display:flex; flex-direction:column; align-items:center; margin: 0 6px;">
                        <button id="redo-btn" class="action-btn" title="Redo">
                            <i class="fas fa-redo"></i>
                        </button>
                        <span style="font-size:11px; color:#555; margin-top:4px;">Redo</span>
                    </div>
                    <button id="clear-all" class="action-btn danger">
                        <i class="fas fa-trash"></i>
                        Clear All
                    </button>
                </div>

                <div class="page-controls">
                    <button id="prev-page" class="nav-btn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    
                    <span class="page-info">
                        <span id="current-page">1</span> / <span id="total-pages">1</span>
                    </span>
                    
                    <button id="next-page" class="nav-btn">
                        <i class="fas fa-chevron-right"></i>
                    </button>

                    <div style="display: flex; flex-direction: column; align-items: center; margin: 0 8px;">
                        <div style="display: flex; flex-direction: row; align-items: center; gap: 8px;">
                            <!-- Rotate Left Button -->
                            <div style="display:flex; flex-direction:column; align-items:center;">
                                <button id="rotate-left" class="nav-btn" title="Rotate Page Left 90°">
                                    <i class="fas fa-undo"></i>
                                </button>
                                <span style="font-size:11px; color:#555; margin-top:4px;">Rotate Left</span>
                            </div>
                            <!-- Rotate Right Button -->
                            <div style="display:flex; flex-direction:column; align-items:center;">
                                <button id="rotate-right" class="nav-btn" title="Rotate Page Right 90°">
                                    <i class="fas fa-redo"></i>
                                </button>
                                <span style="font-size:11px; color:#555; margin-top:4px;">Rotate Right</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="zoom-controls">
                        <button id="zoom-out" class="zoom-btn">
                            <i class="fas fa-search-minus"></i>
                        </button>
                        
                        <span id="zoom-level">100%</span>
                        
                        <button id="zoom-in" class="zoom-btn">
                            <i class="fas fa-search-plus"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- PDF Viewer Container -->
        <div class="pdf-viewer-container">
            <div class="pdf-sidebar" id="annotations-sidebar">
                <h3><i class="fas fa-list"></i> Annotations</h3>
                <div class="annotations-list" id="annotations-list">
                    <p class="no-annotations">No annotations yet. Start highlighting or adding notes!</p>
                </div>
            </div>

            <div class="pdf-main">
                <div class="pdf-canvas-container" id="pdf-canvas-container">
                    <div class="canvas-wrapper" id="canvas-wrapper">
                        <canvas id="pdf-canvas"></canvas>
                        <canvas id="annotation-canvas"></canvas>
                        <div id="notes-container"></div>
                    </div>
                </div>
                
                <div class="pdf-placeholder" id="pdf-placeholder">
                    <div class="placeholder-content">
                        <i class="fas fa-file-pdf"></i>
                        <h3>No PDF Loaded</h3>
                        <p>Upload a PDF file to start annotating</p>
                        <label for="pdf-upload-main" class="upload-main-btn">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <span class="btn-text">Choose PDF File</span>
                        </label>
                        <input type="file" id="pdf-upload-main" accept=".pdf" style="display: none;">
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Modal -->
        <div id="note-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-sticky-note"></i> Add Note</h3>
                    <button class="close-modal" id="close-note-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <textarea id="note-text" placeholder="Enter your note here..." rows="4"></textarea>
                </div>
                <div class="modal-footer">
                    <button id="cancel-note" class="btn-secondary">Cancel</button>
                    <button id="save-note" class="btn-primary">Save Note</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/pdf-viewer.js"></script>
    <script>
        // Dark Mode Toggle Function
        function toggleDarkMode() {
            const body = document.body;
            const darkToggle = document.getElementById('darkModeToggle');
            const icon = darkToggle.querySelector('i');
            
            body.classList.toggle('dark-mode');
            
            // Update icon
            if (body.classList.contains('dark-mode')) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                localStorage.setItem('darkMode', 'enabled');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                localStorage.setItem('darkMode', 'disabled');
            }
        }

        // Load dark mode preference on page load
        document.addEventListener('DOMContentLoaded', function() {
            const darkMode = localStorage.getItem('darkMode');
            const darkToggle = document.getElementById('darkModeToggle');
            const icon = darkToggle.querySelector('i');
            
            if (darkMode === 'enabled') {
                document.body.classList.add('dark-mode');
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            }
        });
    </script>
</body>
</html>